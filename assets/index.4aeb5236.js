var k=Object.defineProperty;var D=(l,e,t)=>e in l?k(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var a=(l,e,t)=>(D(l,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function t(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=t(n);fetch(n.href,c)}})();class I{constructor(e,t){a(this,"_cellsAcross");a(this,"_cellsDown");a(this,"cells");this._cellsAcross=e,this._cellsDown=t,this.cells=[],this.resetCells()}resetCells(){this.cells=[];for(let e=0;e<this._cellsDown;e++){let t=[];for(let s=0;s<this._cellsAcross;s++)t.push(!1);this.cells.push(t)}}randomize(){this.cells=[];for(let e=0;e<this._cellsDown;e++){let t=[];for(let s=0;s<this._cellsAcross;s++)t.push(Math.random()>=.7);this.cells.push(t)}}evalRules(){let e=[];for(let t=0;t<this.cells.length;t++){let s=[];for(let n=0;n<this.cells[t].length;n++){let c=this.getNumLivingNeighbors(n,t);s.push(this.getNewCellValue(this.cells[t][n],c))}e.push(s)}this.cells=e}getNumLivingNeighbors(e,t){let s=0;return t>0&&e>0&&this.cells[t-1][e-1]&&s++,t>0&&this.cells[t-1][e]&&s++,t>0&&e<this.cells[t].length-1&&this.cells[t-1][e+1]&&s++,e<this.cells[t].length-1&&this.cells[t][e+1]&&s++,t<this.cells.length-1&&e<this.cells[t].length-1&&this.cells[t+1][e+1]&&s++,t<this.cells.length-1&&this.cells[t+1][e]&&s++,t<this.cells.length-1&&e>0&&this.cells[t+1][e-1]&&s++,e>0&&this.cells[t][e-1]&&s++,s}getNewCellValue(e,t){return e&&(t===2||t===3)?!0:!e&&t===3}}const o=document.getElementById("canvas"),h=o.getContext("2d"),g=document.getElementById("run-btn"),R=document.getElementById("clear-btn"),N=document.getElementById("rand-btn"),v=document.getElementById("cell-color-picker"),E=document.getElementById("show-grid-input"),L=document.getElementById("resolution-input"),_=document.getElementById("timestep-input");o.width=window.innerWidth;o.height=window.innerHeight;let d=100,i=o.width/d,m=Math.floor(o.height/i),r=new I(d,m),u=!1,w=!1,B="white",M=!0,b=75,p=new Date;g.addEventListener("click",l=>{u=!u,p=new Date,g.innerHTML=u?"pause":"run"});R.addEventListener("click",l=>{r.resetCells()});N.addEventListener("click",l=>{r.randomize()});v.addEventListener("change",l=>{B=v.value});E.addEventListener("change",l=>{M=E.checked});L.addEventListener("change",l=>{u=!1,d=parseInt(L.value),i=o.width/d,m=Math.floor(o.height/i),r=new I(d,m),g.innerHTML="run"});_.addEventListener("change",l=>{b=parseInt(_.value)});const y=l=>{let e=o.getBoundingClientRect(),t=o.width/e.width,s=o.height/e.height;return{x:(l.clientX-e.left)*t,y:(l.clientY-e.top)*s}};document.addEventListener("mousedown",l=>{w=!0;const{x:e,y:t}=y(l);let s=Math.ceil((e-i)/i),n=Math.ceil((t-i)/i);r.cells[n][s]=!r.cells[n][s]});document.addEventListener("mouseup",l=>{w=!1});document.addEventListener("mousemove",l=>{if(w){const{x:e,y:t}=y(l);let s=Math.ceil((e-i)/i),n=Math.ceil((t-i)/i);r.cells[n][s]=!0}});const A=()=>{for(let l=0;l<r.cells.length;l++)for(let e=0;e<r.cells[l].length;e++)h.beginPath(),h.rect(e*i,l*i,i,i),h.fillStyle=r.cells[l][e]?B:"black",h.fill(),M&&(h.strokeStyle=r.cells[l][e]?"black":"white",h.stroke())},C=()=>{if(h.clearRect(0,0,o.width,o.height),A(),u){let l=new Date;l.getTime()-p.getTime()>=b&&(r.evalRules(),p=l)}requestAnimationFrame(C)};C();
